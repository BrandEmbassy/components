import React from 'react'
import Image from './Image'
import Button from './Button'
import Heading, { SUBTITLE_HEADING_LEVEL, TITLE_HEADING_LEVEL } from './Heading'
import Text from './Text'
import QuickReplies from './QuickReplies'
import ComposedElement from './ComposedElement'

export const types = {
  BUTTON: 'BUTTON',
  HEADING: 'HEADING',
  TITLE: 'TITLE',
  SUBTITLE: 'SUBTITLE',
  TEXT: 'TEXT',
  IMAGE: 'IMAGE',
  QUICK_REPLIES: 'QUICK_REPLIES'
}

export default function Element(props) {
  const { id, type, text, url, postback, elements, onClick, hideButtons } = props
  const headingTypes = [
    types.HEADING,
    types.TITLE,
    types.SUBTITLE
  ]

  if (type === types.BUTTON) {
    return <Button label={text} onClick={onClick} postback={postback} />
  }
  if (headingTypes.indexOf(type) >Â -1) {
    const level = type === types.SUBTITLE ? SUBTITLE_HEADING_LEVEL : TITLE_HEADING_LEVEL
    return <Heading content={text} level={level}/>
  }
  if (type === types.TEXT) {
    return <Text content={text} />
  }
  if (type === types.IMAGE) {
    return <Image src={url} />
  }
  if (type === types.QUICK_REPLIES) {
    return <QuickReplies elements={elements} onClick={onClick} hideButtons={hideButtons} />
  }
  if (Array.isArray(elements)) {
    return <ComposedElement elements={elements} onClick={onClick} />
  }
  return null
}
